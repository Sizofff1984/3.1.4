<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <title>Spring Security Example</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .auth-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
    </style>
</head>
<body>
<div class="container">
    <h1>Welcome to Spring Security Demo!</h1>

    <div sec:authorize="isAnonymous()" class="auth-section">
        <h2>You are not logged in</h2>
        <p><a th:href="@{/login}">Login here</a></p>
    </div>

    <div sec:authorize="isAuthenticated()" class="auth-section">
        <h2>Welcome, <span sec:authentication="name"></span>!</h2>
        <p>Your roles: <span sec:authentication="authorities"></span></p>

        <div sec:authorize="hasRole('ADMIN')">
            <h3>Admin Actions:</h3>
            <p><a th:href="@{/admin/users}">Admin Panel</a> - Manage users</p>
        </div>

        <div sec:authorize="hasAnyRole('USER', 'ADMIN')">
            <h3>User Actions:</h3>
            <p><a th:href="@{/user/profile}">My Profile</a> - View your profile</p>
        </div>

        <h3>Logout:</h3>
        <form th:action="@{/perform_logout}" method="post">
            <button type="submit">Logout</button>
        </form>
    </div>

    <div class="auth-section">
        <h2>Test Credentials:</h2>
        <h3>From Memory:</h3>
        <ul>
            <li><strong>Admin:</strong> admin / admin</li>
            <li><strong>User:</strong> user / user</li>
        </ul>
    </div>
</div>
</body>
</html>